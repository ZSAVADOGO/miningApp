{% extends 'miningText/base.html' %}

{% block content %}
<div class="bg-white rounded-xl shadow-md p-6 max-w-3xl mx-auto">

    <!-- Header -->
    <div class="mb-5">
        <h2 class="text-2xl font-bold text-gray-900">
            Nouvel article
        </h2>
    </div>

    <form method="POST" enctype="multipart/form-data" class="space-y-4">
        {% csrf_token %}

        <!-- Titre -->
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">
                Titre
            </label>
            <input
                type="text"
                name="titre"
                required
                class="w-full rounded-lg
                       border-2 border-gray-300
                       bg-gray-50
                       px-3 py-2
                       shadow-sm
                       focus:outline-none
                       focus:border-blue-500
                       focus:ring-2 focus:ring-blue-200
                       hover:border-gray-400
                       transition"
                placeholder="Titre de l’article"
            >
        </div>

        <!-- Contenu -->
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">
                Contenu
            </label>
            <textarea
                name="contenu"
                id="contenu"
                rows="4"
                required
                class="w-full rounded-lg
                       border-2 border-gray-300
                       bg-gray-50
                       px-3 py-2
                       shadow-sm
                       resize-none
                       focus:outline-none
                       focus:border-blue-500
                       focus:ring-2 focus:ring-blue-200
                       hover:border-gray-400
                       transition"
                placeholder="Écrivez ou collez le contenu de l’article ici…"
            ></textarea>

             <!-- Fichier -->
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">
                Discours (fichier)
            </label>
            <input
                type="file"
                name="discours"
                id="discours"
                accept=".txt"
                class="block w-full text-sm text-gray-700
                       rounded-lg border-2 border-dashed border-gray-300
                       bg-gray-50
                       cursor-pointer
                       file:mr-3 file:py-2 file:px-3
                       file:rounded-md file:border-0
                       file:bg-blue-600 file:text-white
                       hover:file:bg-blue-700
                       hover:border-gray-400
                       transition"
            />
        </div>

        </div>

        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

            <!-- Auteur -->
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-1">
                    Auteur
                </label>
                <input
                    type="text"
                    name="auteur"
                    required
                    class="w-full rounded-lg
                           border-2 border-gray-300
                           bg-gray-50
                           px-3 py-2
                           shadow-sm
                           focus:outline-none
                           focus:border-blue-500
                           focus:ring-2 focus:ring-blue-200
                           hover:border-gray-400
                           transition"
                    placeholder="Auteur de l’article"
                >
            </div>

            <!-- Date -->
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-1">
                    Date de publication
                </label>
                <input
                    type="date"
                    name="date_publication"
                    required
                    class="w-full rounded-lg
                           border-2 border-gray-300
                           bg-gray-50
                           px-3 py-2
                           shadow-sm
                           focus:ring-2 focus:ring-blue-200
                           focus:border-blue-500
                           transition"
                >
            </div>

        </div>

       

        <!-- Actions -->
        <div class="flex justify-between items-center pt-4 border-t">
            <a
                href="{% url 'index' %}"
                class="text-sm text-gray-600 hover:text-gray-900 transition"
            >
                ← Retour
            </a>

            <button
                type="submit"
                class="px-5 py-2 rounded-lg bg-blue-600 text-white
                       hover:bg-blue-700 active:scale-95
                       transition font-medium"
            >
                Analyser
            </button>
        </div>

        <script>
document.getElementById("discours").addEventListener("change", function () {
    const file = this.files[0];
    if (!file) return;

    const reader = new FileReader();

    reader.onload = function (e) {
        document.getElementById("contenu").value = e.target.result;
    };

    reader.readAsText(file, "UTF-8");
});
</script>


    </form>
</div>

{% endblock %}
